@(user: service.User, env: securesocial.core.RuntimeEnvironment, lobby: String)
@import securesocial.core.IdentityProvider
@import securesocial.core.AuthenticationMethod._
@import Http.Context.Implicit

@main("Poker - Texas Holdem") {
	
	<link rel="stylesheet" href='@routes.Assets.at("stylesheets/main.css")'/>
	<script src='@routes.Assets.at("javascript/websocket.js")'></script>
	<script src='@routes.Assets.at("javascript/app.js")'></script>
	
	<h2>Lobby: "@lobby"</h2>
	<div ng-app="ngPokerApp" ng-controller="PokerController" class="playfield">
	    <div class="col-md-8">
            <div class="row">
                <div class="col-xs-3 col-sm-3 col-md-3" ng-repeat="(key, value) in players">
                    <p class="btn btn-primary btn-block round playercolor bluebtn text-center">{{key}}</p>
                    <p class="text-center stack">{{value.credits}}</p>
                    <div ng-repeat="(key2, value2) in value.cards" class="col-sm-8 col-md-8">
                        <div class="playercard"><img src="assets/images/Cards/{{value2.rank}}_{{value2.suit}}.png"/></div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div id="communityCards" class="col-md-8">
                    <div class="col-md-10 col-md-offset-1">
                        <div class="playercard" ng-repeat="(key, value) in communityCards">
                        <img height="200" src="assets/images/Cards/{{value.rank}}_{{value.suit}}.png"/>
                            
                        </div>
                    </div>
                    
                    <div class="col-md-10 col-md-offset-1">
                        <p>Pot: {{pot}}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 gameInfo"> 
            <h3 class="glyphicon glyphicon-info-sign">GAME INFORMATION</h3>
            <ul>
                <li>Leader: #PLAYERX - #CASH</li>
                <li>Big Blind: #PLAYERX - {{bigBlind}}</li>
                <li>Small Blind: #PLAYERX - {{smallBlind}}</li>
            </ul>
            
            
            <div>
                <div height="400px" width="400px">
                	<p ng-repeat="text in chatArea">{{text}}<br/><p>
                </div>
            
                 <form id="send-message-form">
                     <p>Your message: </p>
                     <input ng-model="message">
                     <button ng-click="sendMessage()">Send</button>
                     <button ng-click="playField()">Update Play Field</button>
                 </form>
            </div>
            
            
        <div id="player-list" ng-repeat="(key, value) in lobbyPlayer">            		
            	<p ng-style="{color: value ? 'green' : 'red' }">{{key}}</p>
            </div>
        </div>
        <input type="checkbox" ng-model="readyState" ng-change="ready()"/>
        
        
        
        <div class="btn btn-group" ng-style="{visibility: yourTurn ? 'visible' : 'hidden'}">
            <button ng-click="call()">{{currentCallValue > 0 ? 'Call ' + currentCallValue + ' Cr.' : 'Check'}}</button>
            <input ng-model="raiseValue">
            <button ng-click="raise()">Raise</button>
            <button ng-click="fold()">Fold</button>
        </div>
	</div>
}